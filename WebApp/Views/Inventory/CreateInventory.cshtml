@using webapConstants = BIVN.FixedStorage.Services.Common.API;

@{
    var ListDepartments = ViewBag.DepartmentInventory as IEnumerable<webapConstants.Dto.Inventory.DepartmentInventoryDto>;
    var ListLocations = ViewBag.LocationInventory as IEnumerable<webapConstants.Dto.Inventory.DepartmentInventoryDto>;

    var currUser = Context.UserFromContext();

    var validPrivateDepartmentLocation = currUser.AccountType == nameof(AccountType.TaiKhoanRieng) &&
                                                    (User.IsGrant(commonAPIConstant.Permissions.VIEW_ALL_INVENTORY) ||
                                                    User.IsGrant(commonAPIConstant.Permissions.VIEW_CURRENT_INVENTORY) ||
                                                    User.IsGrant(commonAPIConstant.Permissions.EDIT_INVENTORY));
}


<div>
    <div class="search_inventory_form">
        <form id="CreateInventory_Form">
            <div class="row mb-4">
                <div class="col ip-form-update box-container">
                    <label class="text_label">@Html.Translate("Plant")</label>
                    <input id="CreateInventory_Plant" type="text" class="form-control background-color-grey text_ellipsis" placeholder="@Html.Translate("Nhập plant")..." />
                </div>
                <div class="col ip-form-update box-container">
                    <label class="text_label">@Html.Translate("WH Loc.")</label>
                    <input id="CreateInventory_Plant_WhLoc" type="text" class="form-control background-color-grey text_ellipsis" placeholder="@Html.Translate("Nhập WH Loc")..." />
                </div>
                <div class="col ip-form-update box-container" style="width: 10%">
                    <label class="text_label">@Html.Translate("Phòng ban")</label>
                    <select hidden id="CreateInventory_Department" multiple name="native-select" placeholder="Chọn phòng ban..." data-search="false" data-silent-initial-value-set="true">
                        @if (ListDepartments.Any())
                        {
                            @if (validPrivateDepartmentLocation || Context.IsPromoter())
                            {
                                <option value=""></option>
                            }
                            @foreach (var item in ListDepartments)
                            {
                                <option value="@item.DepartmentName">@item.DepartmentName</option>
                            }
                        }
                    </select>
                </div>
                <div class="col ip-form-update box-container" style="width: 10%">
                    <label class="text_label">@Html.Translate("Khu vực")</label>
                    <select class="custom_select" hidden id="CreateInventory_Area" name="CreateInventory_Area" multiple placeholder="Chọn khu vực..." data-search="true" data-silent-initial-value-set="true">
                        @if (ListLocations.Any())
                        {
                            @foreach (var item in ListLocations)
                            {
                                <option value="@item.LocationName">@item.LocationName</option>
                            }
                        }
                    </select>
                </div>
                <div class="col" style="width: 10%">
                    <label class="text_label">@Html.Translate("Loại phiếu")</label>
                    <select hidden id="CreateInventory_Form_Type" multiple name="native-select" placeholder="Chọn loại phiếu..." data-search="false" data-silent-initial-value-set="true">
                        <option value="0">A</option>
                        <option value="1">B</option>
                        <option value="2">E</option>
                        <option value="3">C</option>
                    </select>
                </div>
                <div class="col-2">
                    <label class="text_label">@Html.Translate("Số phiếu")</label>
                    <div class="row">
                        <div class="col pe-0">
                            <input id="CreateInventory_Quantity_From" name="CreateInventory_Quantity_From" placeholder="@Html.Translate("Nhập số")..." type="text" class="form-control background-color-grey text_ellipsis color-black">
                        </div>
                        <div class="custom_arrow_right">
                            <div><img src="./assets/images/icons/Muitensangphai.png"></div>
                        </div>
                        <div class="col ps-0">
                            <input id="CreateInventory_Quantity_To" name="CreateInventory_Quantity_To" placeholder="@Html.Translate("Nhập số")..." type="text" class="form-control background-color-grey text_ellipsis color-black">
                        </div>
                    </div>
                </div>
                <div class="col">
                    <label class="text_label">@Html.Translate("Mã linh kiện")</label>
                    <input id="CreateInventory_Component_Code" type="text" class="form-control background-color-grey text_ellipsis" placeholder="@Html.Translate("Nhập mã linh kiện")..." />
                </div>
                <div class="col">
                    <label class="text_label">@Html.Translate("Model code")</label>
                    <input id="CreateInventory_Model_Code" type="text" class="form-control background-color-grey text_ellipsis" placeholder="@Html.Translate("Nhập model code")..." />
                </div>
                <div class="col">
                    <label class="text_label">@Html.Translate("Tài khoản phân phát")</label>
                    <input id="CreateInventory_User_Distribution" type="text" class="form-control background-color-grey text_ellipsis" placeholder="@Html.Translate("Nhập tên tài khoản phân phát")..." />
                </div>
            </div>
        </form>
        <div class="d-flex justify-content-between mb-3">
            <div class="container_search">
                <button type="button" id="CreateInventory_Btn_Reset" class="background-color-grey btn_reset">
                    <div class="icon_reset">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M6.07333 3.38676C6.65333 3.21343 7.29333 3.1001 8 3.1001C11.1933 3.1001 13.78 5.68676 13.78 8.8801C13.78 12.0734 11.1933 14.6601 8 14.6601C4.80667 14.6601 2.22 12.0734 2.22 8.8801C2.22 7.69343 2.58 6.58676 3.19333 5.66676" stroke="#333333" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M5.24667 3.54683L7.17333 1.3335" stroke="#333333" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M5.24667 3.54688L7.49333 5.18688" stroke="#333333" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    Reset
                </button>
                <button type="button" id="CreateInventory_Btn_Search" class="btn_search">
                    <div class="icon_search">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M7.66667 14.0002C11.1645 14.0002 14 11.1646 14 7.66683C14 4.16903 11.1645 1.3335 7.66667 1.3335C4.16886 1.3335 1.33333 4.16903 1.33333 7.66683C1.33333 11.1646 4.16886 14.0002 7.66667 14.0002Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M14.6667 14.6668L13.3333 13.3335" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    @Html.Translate("Tìm kiếm")
                </button>
            </div>

            <div class="container_modal_add d-flex">
                <button class="btn_add" type="button" id="btnCreateform_A" data-toggle="modal" data-bs-target="#AddNewInventoryModal">
                    <img src="./assets/images/icons/icon-create.svg" />
                    @Html.Translate("Tạo phiếu A")
                </button>
                <input type="file" id="inputFileFormA" hidden />
                <button class="btn_add mx-3" type="button" id="btnCreateform_BE" data-toggle="modal" data-bs-target="#AddNewInventoryModal">
                    <img src="./assets/images/icons/icon-create.svg" />
                    @Html.Translate("Tạo phiếu B")
                </button>
                <input type="file" id="inputFileFormBE" hidden />

                <button class="btn_add" type="button" id="btnCreateform_E" data-toggle="modal" data-bs-target="#AddNewInventoryModal">
                    <img src="./assets/images/icons/icon-create.svg" />
                    @Html.Translate("Tạo phiếu E")
                </button>
                <input type="file" id="inputFileFormE" hidden />

                <button class="btn_add mx-3" type="button" id="btnCreateform_C" data-toggle="modal" data-bs-target="#AddNewInventoryModal">
                    <img src="./assets/images/icons/icon-create.svg" />
                    @Html.Translate("Tạo phiếu C")
                </button>
                <input type="file" id="inputFileFormC" hidden />

                <button class="btn_add" type="button" id="btnCreateform_Ship" data-toggle="modal" data-bs-target="#AddNewInventoryModal">
                    <img src="./assets/images/icons/icon-create.svg" />
                    @Html.Translate("Tạo phiếu Ship")
                </button>
                <input type="file" id="inputFileFormShip" hidden />
            </div>
        </div>
    </div>
    <div id="inventory-form">
        <section class="bg-white pb-2 rounded container-list-view">
            <div class="container_top_table d-flex justify-content-between">
                <div>
                    <div class="export_file select-all-inventory AllDocumentButton" style="margin-left: 8px;">
                        <input type="checkbox" id="select_AllPages_Inventory" class="mx-1" />
                        <h5>@Html.Translate("Tất cả các phiếu")</h5>
                    </div>
                </div>
                <div class="container_top_table">
                    @*<button class="export_file ListInventoryDocument_Delete" id="delete" disabled>
                        <div class="">
                            <img src="./assets/images/icons/Delete_Grey.svg">
                        </div>
                        <h5 class="delete_text color-grey">Xóa</h5>
                    </button>*@
                    <button class="export_file ListInventoryDocument_Delete btn_disabled px-2" id="delete" style="">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none">
                            <path d="M21.07 5.23C19.46 5.07 17.85 4.95 16.23 4.86V4.85L16.01 3.55C15.86 2.63 15.64 1.25 13.3 1.25H10.68C8.35001 1.25 8.13 2.57 7.97 3.54L7.76 4.82C6.83001 4.88 5.9 4.94 4.97 5.03L2.93001 5.23C2.51001 5.27 2.21 5.64 2.25 6.05C2.29 6.46 2.65 6.76 3.07 6.72L5.11001 6.52C10.35 6 15.63 6.2 20.93 6.73C20.96 6.73 20.98 6.73 21.01 6.73C21.39 6.73 21.72 6.44 21.76 6.05C21.79 5.64 21.49 5.27 21.07 5.23Z" fill="#E60000"></path>
                            <path d="M19.23 8.14C18.99 7.89 18.66 7.75 18.32 7.75H5.67999C5.33999 7.75 4.99999 7.89 4.76999 8.14C4.53999 8.39 4.40999 8.73 4.42999 9.08L5.04999 19.34C5.15999 20.86 5.29999 22.76 8.78999 22.76H15.21C18.7 22.76 18.84 20.87 18.95 19.34L19.57 9.09C19.59 8.73 19.46 8.39 19.23 8.14ZM13.66 17.75H10.33C9.91999 17.75 9.57999 17.41 9.57999 17C9.57999 16.59 9.91999 16.25 10.33 16.25H13.66C14.07 16.25 14.41 16.59 14.41 17C14.41 17.41 14.07 17.75 13.66 17.75ZM14.5 13.75H9.49999C9.08999 13.75 8.74999 13.41 8.74999 13C8.74999 12.59 9.08999 12.25 9.49999 12.25H14.5C14.91 12.25 15.25 12.59 15.25 13C15.25 13.41 14.91 13.75 14.5 13.75Z" fill="#E60000"></path>
                        </svg>
                        <h5 class="delete_text color-red">@Html.Translate("Xóa")</h5>
                    </button>

                    <button class="export_file" id="export-QRCode">
                        <div class="">
                            <img src="./assets/images/icons/icon-export-tree.svg">
                        </div>
                        <h5>@Html.Translate("QR Cụm")</h5>
                    </button>

                    <button class="export_file btn_disabled" id="export-tree" disabled>
                        <div class="">
                            <img src="./assets/images/icons/icon-export-tree.svg">
                        </div>
                        <h5>@Html.Translate("Xuất cụm cây")</h5>
                    </button>
                    <button class="export_file btn_disabled" id="export_file_inventory_document" disabled>
                        <div class="">
                            <img src="./assets/images/icons/export_excel.png">
                        </div>
                        <h5>@Html.Translate("Xuất file")</h5>
                    </button>
                    <button class="export_file" id="download-form">
                        <div class="">
                            <img src="./assets/images/icons/icon-download.svg">
                        </div>
                        <h5>@Html.Translate("Tải biểu mẫu")</h5>
                    </button>
                </div>

            </div>
            
            <div class="container_table">
                <table id="inventory_document_table" class="table table-responsive custom_table" width="100%">
                    <thead>
                        <tr class="title_table">
                            <th class="th-sm">
                                <input type="checkbox" id="InventoryDocument_CheckAll" />
                            </th>
                            <th>STT</th>
                            <th>@Html.Translate("Mã phiếu")</th>
                            <th>@Html.Translate("Plant")</th>
                            <th>@Html.Translate("WH Loc.")</th>
                            <th>@Html.Translate("Mã linh kiện")</th>
                            <th>@Html.Translate("Model code")</th>
                            @* <th>@Html.Translate("Tên công đoạn")</th> *@
                            <th>@Html.Translate("Tên linh kiện")</th>
                            <th>@Html.Translate("Quantity")</th>
                            <th>@Html.Translate("Vị trí")</th>
                            <th>@Html.Translate("S/O No.")</th>
                            <th>@Html.Translate("Phòng ban")</th>
                            <th>@Html.Translate("Khu vực")</th>
                            <th>@Html.Translate("Tài khoản phân phát")</th>
                            <th>@Html.Translate("Stock type")</th>
                            <th>@Html.Translate("Special stock")</th>
                            <th>@Html.Translate("S/O List")</th>
                            <th>@Html.Translate("Assembly Loc.")</th>
                            <th>@Html.Translate("Vendor code")</th>
                            <th>@Html.Translate("Phys.Inv")</th>
                            <th>@Html.Translate("Pro. Order No")</th>
                            <th>@Html.Translate("Fisscal year")</th>
                            <th>@Html.Translate("ITEM")</th>
                            <th>@Html.Translate("Planned count")</th>
                            <th>@Html.Translate("Cột C")</th>
                            <th>@Html.Translate("Cột N")</th>
                            <th>@Html.Translate("Cột O")</th>
                            <th>@Html.Translate("Cột P")</th>
                            <th>@Html.Translate("Cột Q")</th>
                            <th>@Html.Translate("Cột R")</th>
                            <th>@Html.Translate("Cột S")</th>
                            <th>@Html.Translate("Ghi chú")</th>
                            <th>@Html.Translate("Người tạo")</th>
                            <th>@Html.Translate("Thời gian tạo")</th>
                            <th>@*Xem chi tiết*@</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </section>
    </div>
</div>
@await Html.PartialAsync("~/Views/Shared/Common/_InventoryListDetailModal_A.cshtml")
@await Html.PartialAsync("~/Views/Shared/Common/_InventoryListDetailModal_BE.cshtml")
@await Html.PartialAsync("~/Views/Shared/Common/_InventoryListDetailModal_C.cshtml")
@await Html.PartialAsync("~/Views/Shared/Common/_InventoryListDownloadFormModal.cshtml")
@await Html.PartialAsync("~/Views/Shared/Common/_InventoryListExportClusterTreeModal.cshtml")
@await Html.PartialAsync("~/Views/Shared/Common/_InventoryListExportQRCodeClusterTreeModal.cshtml")

<script>
   
</script>
<script asp-append-version="true" defer src="./assets/js/inventory/CreateInventory.js"></script>